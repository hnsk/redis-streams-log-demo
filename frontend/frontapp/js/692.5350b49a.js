"use strict";(globalThis["webpackChunklog_demo_quasar"]=globalThis["webpackChunklog_demo_quasar"]||[]).push([[692],{4692:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Y});var a=l(3673);function s(e,t,l,s,r,o){const n=(0,a.up)("StreamSelector"),i=(0,a.up)("StreamTable");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n),(0,a.Wm)(i)],64)}const r={class:"q-pa-md q-gutter-lg"},o={class:"q-pl-md q-gutter-sm"};function n(e,t,l,s,n,i){const u=(0,a.up)("q-toggle"),m=(0,a.up)("q-tooltip"),d=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",r,[(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(s.available_streams),(e=>((0,a.wg)(),(0,a.j4)(u,{modelValue:s.available_streams[e],"onUpdate:modelValue":t=>s.available_streams[e]=t,label:e,key:e,onClick:s.updateSubscribedStreams},null,8,["modelValue","onUpdate:modelValue","label","onClick"])))),128))])]),(0,a._)("div",o,[s.show_splitter?((0,a.wg)(),(0,a.j4)(d,{key:0,color:"white","text-color":"black",label:"Register Stream Splitter",onClick:s.registerStreamSplitter},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Registers a RedisGears function to parse log severities to different streams. Also stores streams to JSON documents for RediSearch indexing.")])),_:1})])),_:1},8,["onClick"])):(0,a.kq)("",!0)])])}var i=l(1959),u=l(5474),m=l(4584);const d={setup(){let e=(0,i.iH)({test:!0}),t=(0,i.iH)(!0);const l=()=>{let l={};u.api.get("api/streams/update").then((a=>{if(Object.keys(e.value).length!=Object.keys(a.data).length){for(const e of Object.keys(a.data))l[e]=!0;e.value=l,t.value&&(t.value=!(Object.entries(e.value).length>1)),s()}}))},s=()=>{for(const[t,l]of Object.entries(e.value)){const e=l?"add":"del";u.api.get(`api/streams/${m.Z.state.client_id}/${e}/${t}`)}},r=()=>{u.api.get("api/streams/splitter").then((()=>{t.value=!1}))};let o=(0,i.iH)(null);return(0,a.bv)((()=>{l(),o.value=setInterval((()=>{l()}),1e3)})),(0,a.Jd)((()=>{clearInterval(o.value)})),{available_streams:e,updateAvailableStreams:l,updateSubscribedStreams:s,registerStreamSplitter:r,show_splitter:t}}};var c=l(4260),g=l(8886),p=l(8240),v=l(5363),b=l(7518),f=l.n(b);const w=(0,c.Z)(d,[["render",n]]),S=w;f()(d,"components",{QToggle:g.Z,QBtn:p.Z,QTooltip:v.Z});var _=l(2323);const k={class:"q-pa-md"},h={key:0},q={key:1};function Z(e,t,l,s,r,o){const n=(0,a.up)("q-badge"),i=(0,a.up)("q-td"),u=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)(u,{title:"Latest Log Events",dense:"",rows:s.store.state.messages,columns:s.data.columns,"hide-pagination":!0,"row-key":e=>e.id,pagination:{rowsPerPage:0}},{"body-cell":(0,a.w5)((e=>[(0,a.Wm)(i,{props:e},{default:(0,a.w5)((()=>["log_level"==e.col.name?((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(n,{label:e.value,color:s.levelColors[e.value.toLowerCase()]},null,8,["label","color"])])):((0,a.wg)(),(0,a.iD)("div",q,(0,_.zw)(e.value),1))])),_:2},1032,["props"])])),_:1},8,["rows","columns","row-key"])])}var y=l(1082);const C={setup(){const e={debug:"blue-2",info:"info",warning:"warning",error:"red-6",critical:"red-10"},t=(0,i.qj)({columns:[{name:"timestamp",field:"timestamp",label:"Timestamp",align:"left",format:e=>y.ZP.formatDate(parseInt(e),"YYYY-MM-DD HH:mm:ss.SSS")},{name:"hostname",field:"hostname",label:"Hostname",align:"left"},{name:"log_level",field:"log_level",label:"Log Level",align:"center"},{name:"message",field:"message",label:"Message",style:"width: 100%",align:"left"}]});return m.Z.state.client_id||(0,a.bv)(m.Z.dispatch("setClientID")),{data:t,store:m.Z,levelColors:e}}};var D=l(6429),T=l(3884),j=l(9721);const H=(0,c.Z)(C,[["render",Z]]),O=H;f()(C,"components",{QTable:D.Z,QTd:T.Z,QBadge:j.Z});const Q={components:{StreamSelector:S,StreamTable:O},setup(){return{StreamSelector:S,StreamTable:O}}},W=(0,c.Z)(Q,[["render",s]]),Y=W}}]);